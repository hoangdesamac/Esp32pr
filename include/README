# GPIO HAL layout (ESP32-friendly)

- `include/gpio_driver.h`: API ổn định cho app.
- `src/gpio_driver.cpp`:
  - Dùng SDK khi có (`ESP_PLATFORM` hoặc `ARDUINO_ARCH_ESP32`): đúng IO_MUX/pull/bank.
  - Fallback bare-metal khi không có SDK: tối giản, đủ an toàn.

## Build tips (PlatformIO)
- ESP-IDF framework tự định nghĩa `ESP_PLATFORM` → tự chọn nhánh SDK.
- Arduino-ESP32 framework định nghĩa `ARDUINO_ARCH_ESP32`.
- Nếu muốn cưỡng bức chọn nhánh:
  - `build_flags = -DESP_PLATFORM` hoặc `-DARDUINO_ARCH_ESP32`.

## Lưu ý ESP32
- GPIO32..39: đọc từ `GPIO_IN1_REG` (bit 0..7), 34..39 input-only.
- Muốn pull-up/down chính xác ⇒ dùng nhánh SDK (soc/io_mux_reg.h).